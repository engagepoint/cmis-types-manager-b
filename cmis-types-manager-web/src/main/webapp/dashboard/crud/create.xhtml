<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="../../template.xhtml"
                xmlns:uib="http://engagepoint.com/uib">
<ui:define name="leftMenu">
    <ui:include src="/dashboard/leftMenu.xhtml"/>
</ui:define>


<ui:define name="mainContent">

<h:form id="createTypeForm">
    <p:accordionPanel id="accordionPanel" multiple="true">
        <p:tab id="accordionTabAttributes" title="Attributes">
            <h:panelGrid columns="2" cellpadding="5">

                <p:outputLabel id="outputTextView" for="inputTextView" value="Display name :"/>
                <p:inputText id="inputTextView" value="#{createBean.type.displayName}" required="true"
                             requiredMessage="Please, enter display name"/>

                <p:outputLabel id="outputTextView1" for="inputTextView1" value="Description :"/>
                <p:inputText id="inputTextView1" value="#{createBean.type.description}"/>

                <p:outputLabel id="outputTextView2" for="inputTextView2" value="Id :"/>
                <p:inputText id="inputTextView2" value="#{createBean.type.id}" required="true"
                             requiredMessage="Please, enter id"/>

                <p:outputLabel id="outputTextView3" for="inputTextView3" value="Local Namespace :"/>
                <p:inputText id="inputTextView3" value="#{createBean.type.localNamespace}"/>

                <p:outputLabel id="outputTextView4" for="inputTextView4" value="Local Name :"/>
                <p:inputText id="inputTextView4" value="#{createBean.type.localName}"/>

                <p:outputLabel id="outputTextView5" for="inputTextView5" value="Querty Name :"/>
                <p:inputText id="inputTextView5" value="#{createBean.type.queryName}"/>

                <p:outputLabel id="outputTextView6" for="inputTextView6" value="Base Type"/>
                <h:outputText id="inputTextView6" value="#{createBean.baseType}"/>

                <p:outputLabel id="outputTextView7" for="inputTextView7" value="Parent Type"
                               rendered="#{!createBean.isSecondary()}"/>
                <h:outputText id="inputTextView7" value="#{createBean.parentType}"
                              rendered="#{!createBean.isSecondary()}"/>

                <p:outputLabel id="outputTextView8" for="selectCheckboxCreatabel" value="Creatable :"
                               rendered="#{!createBean.isSecondary()}"/>
                <p:selectBooleanCheckbox id="selectCheckboxCreatabel" value="#{createBean.type.creatable}"
                                         rendered="#{!createBean.isSecondary()}"/>

                <p:outputLabel id="outputTextView9" for="selectCheckboxFileable" value="Fileable :"
                               rendered="#{!createBean.isSecondary()}"/>
                <p:selectBooleanCheckbox id="selectCheckboxFileable" value="#{createBean.type.fileable}"
                                         rendered="#{!createBean.isSecondary()}"/>

                <p:outputLabel id="outputTextView10" for="selectCheckboxQueryable" value="Queryable :"/>
                <p:selectBooleanCheckbox id="selectCheckboxQueryable" value="#{createBean.type.queryable}"/>

                <p:outputLabel id="outputTextView11" for="selectCheckboxIst"
                               value="Included in super type queries :"/>
                <p:selectBooleanCheckbox id="selectCheckboxIst"
                                         value="#{createBean.type.includedInSupertypeQuery}"/>

                <p:outputLabel id="outputTextView12" for="selectCheckboxFti" value="Full text indexed :"/>
                <p:selectBooleanCheckbox id="selectCheckboxFti" value="#{createBean.type.fulltextIndexed}"/>

                <p:outputLabel id="outputTextView13" for="selectCheckboxACL" value="ACL Contronable :"
                               rendered="#{!createBean.isSecondary()}"/>
                <p:selectBooleanCheckbox id="selectCheckboxACL" value="#{createBean.type.controllableAcl}"
                                         rendered="#{!createBean.isSecondary()}"/>

                <p:outputLabel id="outputTextView14" for="selectCheckboxPC" value="Policy contronable :"
                               rendered="#{!createBean.isSecondary()}"/>
                <p:selectBooleanCheckbox id="selectCheckboxPC" value="#{createBean.type.controllablePolicy}"
                                         rendered="#{!createBean.isSecondary()}"/>

                <p:outputLabel id="outputTextView15" value="Type mutability"/>
                <h:outputText value="Create, Update, Delete"/>
            </h:panelGrid>
        </p:tab>
        <p:tab id="accordionTabMetadata" title="Metadata">
            <p:dataTable var="property"
                         value="#{createBean.typeProperties}"
                         id="metadataTabel"
                         selectionMode="single"
                         selection="#{createBean.selectedTypeProperty}"
                         scrollable="true"
                         rowKey="#{property.id}"
                         scrollHeight="350"
                         scrollWidth="657">
                <f:facet name="header">
                    <uib:gridContainer>
                        <uib:gridRow fluid="true">
                            <uib:gridColumn column="12">
                                <h:outputText styleClass="fl-left" value="Metadata tabel"/>
                                <p:commandButton id="newSourceSystemButton" value="Add New Line"
                                                 styleClass="fl-right small blue"
                                                 icon="ui-icon-document"
                                                 update="-mainContent"
                                                 onclick="createMetadataModal.show();return false;"/>
                                <p:commandButton value="Delete selected"
                                                 action="#{createBean.deleteMetaData()}"
                                                 update="-createTypeForm-accordionPanel-metadataTabel,-messages"
                                                 styleClass="fl-right small blue"/>
                                <p:commandButton value="Update"
                                                 update="-mainContent"
                                                 styleClass="fl-right small blue"
                                                 oncomplete="updateMetadataModal.show()"/>
                            </uib:gridColumn>
                        </uib:gridRow>
                    </uib:gridContainer>
                </f:facet>
                <p:column headerText="Name">
                    <h:outputText value="#{property.displayName}"/>
                </p:column>

                <p:column headerText="Id">
                    <h:outputText value="#{property.id}"/>
                </p:column>

                <p:column headerText="Local name">
                    <h:outputText value="#{property.localName}"/>
                </p:column>

                <p:column headerText="Query Name">
                    <h:outputText value="#{property.queryName}"/>
                </p:column>

                <p:column headerText="Local name space">
                    <h:outputText value="#{property.localNamespace}"/>
                </p:column>

                <p:column headerText="Cardinality">
                    <h:outputText value="#{property.cardinality}"/>
                </p:column>

                <p:column headerText="Updatability">
                    <h:outputText value="#{property.updatability}"/>
                </p:column>

                <p:column headerText="Property type">
                    <h:outputText value="#{property.propertyType}"/>
                </p:column>

                <p:column headerText="Description">
                    <h:outputText value="#{property.description}"/>
                </p:column>
                <p:column headerText="Quarylable">
                    <p:selectBooleanCheckbox disabled="true"
                                             value="#{property.queryable}"/>
                </p:column>
                <p:column headerText="Orderable">
                    <p:selectBooleanCheckbox disabled="true"
                                             value="#{property.orderable}"/>
                </p:column>
                <p:column headerText="Requeried">
                    <p:selectBooleanCheckbox disabled="true"
                                             value="#{property.required}"/>
                </p:column>
                <p:column headerText="Inheried">
                    <p:selectBooleanCheckbox disabled="true"
                                             value="#{property.inherited}"/>
                </p:column>
                <p:column>
                    <p:commandButton value="delete" styleClass="custom" icon="ui-icon-close"
                                     title="Delete" alt="Delete"
                                     immediate="true"
                                     action="#{createBean.deleteMetaData(property)}"
                                     update="-createTypeForm-accordionPanel-metadataTabel,-messages"/>
                </p:column>
            </p:dataTable>

        </p:tab>
    </p:accordionPanel>
    <p:commandButton id="createTypeBtm" value="Create Type" action="#{createBean.createType}"
                     update="-mainContent"
                     styleClass="mt20"/>
    <p:button id="cancelCreateButton" value="Cancel" actionListener="#{backNavigationBean.goToLastPage()}"
              styleClass="secondary" outcome="#{backNavigationBean.goToLastPage()}"/>
</h:form>


<p:dialog id="createMetadataModalDialog" header="Create Metadata Line" widgetVar="createMetadataModal" modal="true"
          resizable="false">
    <h:form id="createMetadataModalForm">
        <p:panelGrid columns="2" cellpadding="5">
            <p:outputLabel value="Id">
                <p:inputText id="newMetaDataId" value="#{createBean.newTypeProperty.id}"/>
            </p:outputLabel>

            <p:outputLabel value="Name">
                <p:inputText id="newMetaDataName" value="#{createBean.newTypeProperty.displayName}"/>
            </p:outputLabel>

            <p:outputLabel value="Local name">
                <p:inputText id="newMetaDataLocalName" value="#{createBean.newTypeProperty.localName}"/>
            </p:outputLabel>

            <p:outputLabel value="Query Name">
                <p:inputText id="newMetaDataQueryName" value="#{createBean.newTypeProperty.queryName}"/>
            </p:outputLabel>

            <p:outputLabel value="Local name space">
                <p:inputText id="newMetaDataLocalNamespace" value="#{createBean.newTypeProperty.localNamespace}"/>
            </p:outputLabel>

            <p:outputLabel value="Description">
                <p:inputText id="newMetaDataDescription" value="#{createBean.newTypeProperty.description}"/>
            </p:outputLabel>

        </p:panelGrid>

        <p:panelGrid columns="2" cellpadding="5">
            <p:outputLabel value="Cardinality" for="newMetaDataCardinality"/>
            <p:selectOneMenu id="newMetaDataCardinality" value="#{createBean.newTypeProperty.cardinality}">
                <f:selectItems value="#{createBean.cardinalitylityValues}"
                               var="cardinality"
                               itemLabel="#{cardinality}"
                               itemValue="#{cardinality}"/>
            </p:selectOneMenu>

            <p:outputLabel value="Updatability" for="newMetaDataUpdatability"/>
            <p:selectOneMenu id="newMetaDataUpdatability" value="#{createBean.newTypeProperty.updatability}">
                <f:selectItems value="#{createBean.updatabilityValues}"
                               var="updatability"
                               itemLabel="#{updatability}"
                               itemValue="#{updatability}"/>
            </p:selectOneMenu>

            <p:outputLabel value="Property type" for="newMetaDataPropertyType"/>
            <p:selectOneMenu id="newMetaDataPropertyType" value="#{createBean.newTypeProperty.propertyType}">
                <f:selectItems value="#{createBean.propertyTypeValuesValues}"
                               var="propertyType"
                               itemLabel="#{propertyType}"
                               itemValue="#{propertyType}"/>
            </p:selectOneMenu>
        </p:panelGrid>
        <p:panelGrid columns="2">
            <p:outputLabel value="Quarylable" for="selectCheckboxQuarylable"/>
            <p:selectBooleanCheckbox id="selectCheckboxQuarylable"
                                     value="#{createBean.newTypeProperty.queryable}"/>

            <p:outputLabel value="Orderable" for="selectCheckboxOrderable"/>
            <p:selectBooleanCheckbox id="selectCheckboxOrderable"
                                     value="#{createBean.newTypeProperty.orderable}"/>

            <p:outputLabel value="Requeried" for="selectCheckboxRequeried"/>
            <p:selectBooleanCheckbox id="selectCheckboxRequeried"
                                     value="#{createBean.newTypeProperty.required}"/>

            <p:outputLabel value="Inheried" for="selectCheckboxInheried"/>
            <p:selectBooleanCheckbox id="selectCheckboxInheried"
                                     value="#{createBean.newTypeProperty.inherited}"/>
        </p:panelGrid>

        <div class="fl-right">
            <p:commandButton id="createMetadataButton" value="Add"
                             update="-createTypeForm-accordionPanel-metadataTabel,-createMetadataModalDialog"
                             action="#{createBean.addNewMetaData()}"
                             oncomplete="createMetadataModal.hide()"/>
            <p:commandButton id="cancelCreateMetadataButton" value="Cancel"
                             update="-mainContent"
                             styleClass="secondary"
                             onclick="createMetadataModal.hide();return false;"/>
        </div>
    </h:form>
</p:dialog>

<p:dialog id="updateMetadataModalDialog" header="Updata Metadata Line" widgetVar="updateMetadataModal" modal="true"
          resizable="false"
          width="200">
    <h:form id="updateMetadataModalForm">
        <p:panelGrid columns="2" cellpadding="5">
            <p:outputLabel value="Id">
                <p:inputText id="newMetaDataIdUpdate" value="#{createBean.selectedTypeProperty.id}"/>
            </p:outputLabel>

            <p:outputLabel value="Name">
                <p:inputText id="newMetaDataNameUpdate" value="#{createBean.selectedTypeProperty.displayName}"/>
            </p:outputLabel>

            <p:outputLabel value="Local name">
                <p:inputText id="newMetaDataLocalNameUpdate" value="#{createBean.selectedTypeProperty.localName}"/>
            </p:outputLabel>

            <p:outputLabel value="Query Name">
                <p:inputText id="newMetaDataQueryNameUpdate" value="#{createBean.selectedTypeProperty.queryName}"/>
            </p:outputLabel>

            <p:outputLabel value="Local name space">
                <p:inputText id="newMetaDataLocalNamespaceUpdate"
                             value="#{createBean.selectedTypeProperty.localNamespace}"/>
            </p:outputLabel>

            <p:outputLabel value="Description">
                <p:inputText id="newMetaDataDescriptionUpdate" value="#{createBean.selectedTypeProperty.description}"/>
            </p:outputLabel>
        </p:panelGrid>


        <p:panelGrid columns="2" cellpadding="5">
            <p:outputLabel value="Cardinality" for="newMetaDataCardinalityUpdate"/>
            <p:selectOneMenu id="newMetaDataCardinalityUpdate" value="#{createBean.selectedTypeProperty.cardinality}">
                <f:selectItems value="#{createBean.cardinalitylityValues}"
                               var="cardinality"
                               itemLabel="#{cardinality}"
                               itemValue="#{cardinality}"/>
            </p:selectOneMenu>

            <p:outputLabel value="Updatability" for="newMetaDataUpdatabilityUpdate"/>
            <p:selectOneMenu id="newMetaDataUpdatabilityUpdate" value="#{createBean.selectedTypeProperty.updatability}">
                <f:selectItems value="#{createBean.updatabilityValues}"
                               var="updatability"
                               itemLabel="#{updatability}"
                               itemValue="#{updatability}"/>
            </p:selectOneMenu>

            <p:outputLabel value="Property type" for="newMetaDataPropertyTypeUpdate"/>
            <p:selectOneMenu id="newMetaDataPropertyTypeUpdate" value="#{createBean.selectedTypeProperty.propertyType}">
                <f:selectItems value="#{createBean.propertyTypeValuesValues}"
                               var="propertyType"
                               itemLabel="#{propertyType}"
                               itemValue="#{propertyType}"/>
            </p:selectOneMenu>
        </p:panelGrid>


        <p:panelGrid columns="2">
            <p:outputLabel value="Quarylable" for="selectCheckboxQuarylableUpdate"/>
            <p:selectBooleanCheckbox id="selectCheckboxQuarylableUpdate"
                                     value="#{createBean.selectedTypeProperty.queryable}"/>

            <p:outputLabel value="Orderable" for="selectCheckboxOrderableUpdate"/>
            <p:selectBooleanCheckbox id="selectCheckboxOrderableUpdate"
                                     value="#{createBean.selectedTypeProperty.orderable}"/>

            <p:outputLabel value="Requeried" for="selectCheckboxRequeriedUpdate"/>
            <p:selectBooleanCheckbox id="selectCheckboxRequeriedUpdate"
                                     value="#{createBean.selectedTypeProperty.required}"/>

            <p:outputLabel value="Inheried" for="selectCheckboxInheriedUpdate"/>
            <p:selectBooleanCheckbox id="selectCheckboxInheriedUpdate"
                                     value="#{createBean.selectedTypeProperty.inherited}"/>
        </p:panelGrid>

        <div class="fl-right">
            <p:commandButton id="updateMetadataButton" value="Update"
                             update="-mainContent"
                             action="#{createBean.updateSelectedMetaData()}" oncomplete="updateMetadataModal.hide()"/>
            <p:commandButton id="cancelUpdateMetadataButton" value="Cancel"
                             update="-mainContent" styleClass="secondary"
                             onclick="updateMetadataModal.hide();return false;"/>
        </div>
    </h:form>
</p:dialog>
</ui:define>
</ui:composition>