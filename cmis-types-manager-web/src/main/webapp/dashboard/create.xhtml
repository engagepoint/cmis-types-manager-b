<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="../template.xhtml"
                xmlns:uib="http://engagepoint.com/uib">

<ui:define name="mainContent">
<h:form>
    <p:commandButton id="return" value="Return" action="#{navigation.toMainPage}" styleClass="mb20"/>
</h:form>
<h:form id="createTypeForm">
<p:accordionPanel id="accordionPanel" multiple="true">
    <p:tab id="accordionTabAttributes" title="Attributes">
        <h:panelGrid columns="2" cellpadding="5">

            <h:outputText id="outputTextView" value="Display name *:"/>
            <p:inputText id="inputTextView" value="#{createBean.type.displayName}" required="true" requiredMessage="Please, enter display name"/>

            <h:outputText id="outputTextView1" value="Description :"/>
            <p:inputText id="inputTextView1" value="#{createBean.type.description}"/>

            <h:outputText id="outputTextView2" value="Id *:" required="true" requiredMessage="Please, enter id"/>
            <p:inputText id="inputTextView2" value="#{createBean.type.id}"/>

            <h:outputText id="outputTextView3" value="Local Namespace :"/>
            <p:inputText id="inputTextView3" value="#{createBean.type.localNamespace}"/>

            <h:outputText id="outputTextView4" value="Local Name :"/>
            <p:inputText id="inputTextView4" value="#{createBean.type.localName}"/>

            <h:outputText id="outputTextView5" value="Querty Name :"/>
            <p:inputText id="inputTextView5" value="#{createBean.type.queryName}"/>

            <h:outputText id="outputTextView16" value="Base Type" />
            <h:outputText id="inputTextView16" value="#{createBean.baseType}"/>

            <h:outputText id="outputTextView6" value="Parent Type" rendered="#{!createBean.hide()}"/>
            <h:outputText id="inputTextView6" value="#{createBean.parentType}" rendered="#{!createBean.hide()}"/>

            <h:outputText id="outputTextView7" value="Creatabel :" rendered="#{!createBean.hide()}"/>
            <p:selectBooleanCheckbox id="selectCheckboxCreatabel" value="#{createBean.type.creatable}" rendered="#{!createBean.hide()}"/>

            <h:outputText id="outputTextView8" value="Fileable :" rendered="#{!createBean.hide()}"/>
            <p:selectBooleanCheckbox id="selectCheckboxFileable" value="#{createBean.type.fileable}" rendered="#{!createBean.hide()}"/>

            <h:outputText id="outputTextView9" value="Queryable :"/>
            <p:selectBooleanCheckbox id="selectCheckboxQueryable" value="#{createBean.type.queryable}"/>

            <h:outputText id="outputTextView10" value="Included in super type queries :"/>
            <p:selectBooleanCheckbox id="selectCheckboxIst"
                                     value="#{createBean.type.includedInSupertypeQuery}"/>

            <h:outputText id="outputTextView11" value="Full text indexed :"/>
            <p:selectBooleanCheckbox id="selectCheckboxFti" value="#{createBean.type.fulltextIndexed}"/>

            <h:outputText id="outputTextView12" value="ACL Contronable :" rendered="#{!createBean.hide()}"/>
            <p:selectBooleanCheckbox id="selectCheckboxACL" value="#{createBean.type.controllableAcl}" rendered="#{!createBean.hide()}"/>

            <h:outputText id="outputTextView13" value="Policy contronable :" rendered="#{!createBean.hide()}"/>
            <p:selectBooleanCheckbox id="selectCheckboxPC" value="#{createBean.type.controllablePolicy}" rendered="#{!createBean.hide()}"/>

            <h:outputText id="outputTextView14" value="Type mutability"/>
            <h:outputText value="Create, Update, Delete"/>
        </h:panelGrid>
    </p:tab>


    <p:tab id="accordionTabMetadata" title="Metadata">
        <p:dataTable var="property" value="#{createBean.typeProperties}"
                     id="metadataTabel"
                     editable="true"
                     scrollable="true"
                     scrollHeight="350"
                     scrollWidth="626"
                >
            <f:facet name="header">
                <uib:gridContainer>
                    <uib:gridRow fluid="true">
                        <uib:gridColumn column="12">
                            <h:outputText styleClass="fl-left" value="Metadata tabel"/>
                            <p:commandButton id="newSourceSystemButton" value="Add New Line"
                                             styleClass="fl-right small blue"
                                             icon="ui-icon-document"
                                             action="#{createBean.addAction}"
                                             update="-createTypeForm"
                                             oncomplete="triggerEdit()"
                                    />
                            <ui:remove>
                                <uib:aligner align="right">

                                </uib:aligner>
                            </ui:remove>

                        </uib:gridColumn>
                    </uib:gridRow>
                </uib:gridContainer>
            </f:facet>

            <p:column headerText="Id">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{property.id}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{property.id}"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="LocalName">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{property.localName}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{property.localName}"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Query Name">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{property.queryName}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{property.queryName}"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Local Name">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{property.localName}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{property.localName}"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Cardinality">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{property.cardinality}"/>
                    </f:facet>
                    <f:facet name="input">
                        <h:selectOneMenu value="#{property.cardinality}">
                            <f:selectItems value="#{createBean.cardinalitylityValues}"
                                           var="cardinality"
                                           itemLabel="#{cardinality}"
                                           itemValue="#{cardinality}"/>
                        </h:selectOneMenu>
                    </f:facet>
                </p:cellEditor>

            </p:column>

            <p:column headerText="Updatability">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{property.updatability}"/>
                    </f:facet>
                    <f:facet name="input">
                        <h:selectOneMenu value="#{property.updatability}">
                            <f:selectItems value="#{createBean.updatabilityValues}"
                                           var="updatability"
                                           itemLabel="#{updatability}"
                                           itemValue="#{updatability}"/>
                        </h:selectOneMenu>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Property type">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{property.propertyType}"/>
                    </f:facet>
                    <f:facet name="input">
                        <h:selectOneMenu value="#{property.propertyType}">
                            <f:selectItems value="#{createBean.propertyTypeValuesValues}"
                                           var="propertyType"
                                           itemLabel="#{propertyType}"
                                           itemValue="#{propertyType}"/>
                        </h:selectOneMenu>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Action">
                <p:rowEditor/>
                <p:commandButton styleClass="custom" icon="ui-icon-close"
                                 action="#{createBean.deleteAction(property)}"
                                 title="Delete" alt="Delete"
                                 update="metadataTabel">
                </p:commandButton>
            </p:column>


        </p:dataTable>
    </p:tab>
</p:accordionPanel>

<ui:remove>
    <p:confirmDialog id="deleteConfirmDialog" message="Are you sure you want to delete selected Source System?"
                     header="Delete Source System"
                     severity="alert" widgetVar="deleteSourceSystemConfirmation">
        <p:commandButton value="No" onclick="deleteSourceSystemConfirmation.hide()"
                         type="button" styleClass="secondary"/>
        <p:commandButton value="Yes"
                         oncomplete="deleteSourceSystemConfirmation.hide()" update="-createTypeForm"/>
    </p:confirmDialog>
</ui:remove>

<p:commandButton id="createTypeBtm" value="Create Type" action="#{createBean.createType}" update="-mainContent"
                 styleClass="mt20"/>

</h:form>
</ui:define>
</ui:composition>